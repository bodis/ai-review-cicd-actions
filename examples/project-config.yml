# Example: Project-Level Configuration
# Place this in your project at .github/ai-review-config.yml

# Project context information
project_context:
  name: "Payment Processing Service"
  architecture: "Microservices with Event Sourcing"
  technology_stack:
    - Python 3.11
    - FastAPI
    - PostgreSQL
    - Redis
    - React

  # Critical paths that need extra scrutiny
  critical_paths:
    - "backend/payment_processor/"
    - "backend/transaction_log/"
    - "backend/fraud_detection/"

# Project-specific constraints
project_constraints:
  - "All payment operations must be idempotent"
  - "Transaction amounts must use Decimal type, never float"
  - "All database operations must be within transactions"
  - "Financial calculations require audit logging"
  - "Payment data must be encrypted at rest"
  - "PCI-DSS compliance required for card data handling"

# Custom pattern-based rules
custom_rules:
  # Detect float usage for money
  - pattern: "float.*amount|price|total|balance"
    message: "Use Decimal for monetary values, not float"
    severity: "critical"

  # Detect SQL injection risks
  - pattern: 'execute\(.*\+ .*\)|cursor\.execute\(f"'
    message: "SQL injection risk: use parameterized queries"
    severity: "critical"

  # Detect missing error handling on payment operations
  - pattern: "process_payment|charge_card|refund_transaction"
    message: "Payment operations must have comprehensive error handling"
    severity: "high"

# Override review aspects (enable/disable specific reviews)
review_aspects:
  - name: security_review
    enabled: true  # Always run security review

  - name: performance_review
    enabled: true  # Enable for this project (disabled by default)

  - name: testing_review
    enabled: true  # Require testing review for payment service

# Override blocking rules for this project
blocking_rules:
  block_on_critical: true
  block_on_high: true  # Stricter for payment service

  max_findings:
    critical: 0
    high: 0  # Zero tolerance for high issues in payment service
    medium: 10

# GitHub settings
github:
  post_summary_comment: true
  post_inline_comments: true
  inline_comment_severity_threshold: "medium"  # Show more details

# Company policies source (optional)
# Uncomment and update with your company's policies URL
# company_policies_source: "github://your-org/policies/main/code-review-policies.yml"
